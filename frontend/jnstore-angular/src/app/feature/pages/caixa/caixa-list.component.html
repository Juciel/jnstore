<div class="card">
  <div class="card-header d-flex justify-content-between align-items-center">
    <h3 class="card-title visually-hidden">Caixas</h3>
    <a class="btn btn-primary" routerLink="/caixa/abrir">Abrir Caixa</a>
  </div>
  <div class="card-body">
    <div *ngIf="successMessage" class="alert alert-success">{{ successMessage }}</div>
    <div *ngIf="loading">Carregando...</div>
    <div *ngIf="error" class="alert alert-danger">{{ error }}</div>
    <table *ngIf="!loading && caixas.length" class="table table-striped">
      <thead>
        <tr>
          <th>Data Abertura</th>
          <th>Data Fechamento</th>
          <th>Valor Inicial</th>
          <th>Valor Final</th>
          <th style="width: 120px;">Ações</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let caixa of caixas">
          <td>{{ caixa.dataAbertura | date:'dd/MM/yyyy HH:mm':'UTC' }}</td>
          <td>{{ caixa.dataFechamento | date:'dd/MM/yyyy HH:mm':'UTC'}}</td>
          <td>{{ caixa.valorInicial | currency:'BRL':'symbol':'1.2-2' }}</td>
          <td>{{ caixa.valorFinal | currency:'BRL':'symbol':'1.2-2' }}</td>
          <td>
            <a [routerLink]="['/caixas', caixa.id, 'detalhes']" class="btn btn-sm btn-info me-2"><i class="fas fa-eye"></i></a>
            <button [routerLink]="['/caixa/fechar', caixa.id]" *ngIf="caixa.dataFechamento === null" class="btn btn-sm btn-warning me-2" title="Fechar Caixa"><i class="fas fa-lock"></i></button>
          </td>
        </tr>
      </tbody>
    </table>
    <div *ngIf="!loading && !caixas.length" class="text-muted">Nenhum caixa encontrado.</div>
  </div>
</div>
