<div class="categoria-form container py-3">
  <div *ngIf="loading" class="loading-overlay">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>

  <div *ngIf="!loading">
    <div class="d-flex justify-content-between align-items-center mb-2">
      <a class="btn btn-secondary" routerLink="/categorias">&larr; Voltar</a>
    </div>

    <form [formGroup]="form" (ngSubmit)="submit()" novalidate>
      <div class="mb-3">
        <label class="form-label">Descrição</label>
        <input class="form-control" [class.is-invalid]="form.get('descricao')?.invalid && form.get('descricao')?.touched"
          formControlName="descricao" placeholder="Ex: Camisetas, Calças, Acessórios" maxlength="100"/>
        <div *ngIf="form.get('descricao')?.invalid && form.get('descricao')?.touched" class="invalid-feedback">
          <div *ngIf="form.get('descricao')?.errors?.['required']">Descrição é obrigatória.</div>
          <div *ngIf="form.get('descricao')?.errors?.['minlength']">Mínimo 3 caracteres.</div>
          <div *ngIf="form.get('descricao')?.errors?.['maxlength']">Máximo 100 caracteres.</div>
        </div>
      </div>

      <div class="mb-3">
        <button type="submit" class="btn btn-primary" [disabled]="form.invalid || loading">{{ loading ? 'Salvando...' :
          'Salvar Categoria' }}</button>
      </div>
    </form>

    <div *ngIf="saveError" class="alert alert-danger">{{ saveError }}</div>
  </div>
</div>
